<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>eMondrian</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/eMondrian/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/eMondrian/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/rainbow.min.css"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Montserrat:wght@500"><script data-n-head="ssr" src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js" defer></script><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Montserrat:wght@500",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Montserrat:wght@500"></noscript><link rel="preload" href="/eMondrian/_nuxt/70dfbcb.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/80dda03.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/605d662.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/565d7d2.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/fef1cbb.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/aa02bf4.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/5378a89.js" as="script"><style data-vue-ssr-id="1b46c1b8:0 1a73ea6b:0 4ed4f6da:0 caf88bee:0 73ca7206:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0%;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.logo[data-v-abe39318]{position:absolute;width:30%;max-width:300px;margin-bottom:3rem;display:block}.logo img[data-v-abe39318]{width:100%;box-sizing:border-box;padding:2rem}.logo .white[data-v-abe39318]{display:block}.logo .black[data-v-abe39318]{display:none}.docs_container[data-v-abe39318]{display:flex;height:100%;width:100%;position:absolute;overflow:hidden}.docs_container input[data-v-abe39318]{display:none}.docs_nav[data-v-abe39318]{background-color:#262627;max-width:300px;flex:1 1 30%;color:#fff;padding:8rem 2.5rem 5rem;box-sizing:border-box}.docs_article[data-v-abe39318]{box-sizing:border-box;flex:1 1 70%;padding:5rem 3rem;overflow:auto}@media (max-width:800px){.docs_article[data-v-abe39318]{margin-top:5rem;padding:0 3rem 5rem}.docs_nav[data-v-abe39318]{display:none}.logo[data-v-abe39318]{position:absolute;max-width:300px;max-height:2rem;margin:.5rem 3rem}.logo img[data-v-abe39318]{height:100%;width:auto;padding:0}.logo .white[data-v-abe39318]{display:none}.logo .black[data-v-abe39318]{display:block}.docs_container .docs_nav[data-v-abe39318]{padding:3rem 3rem 2rem;display:block;position:absolute;text-align:center;background:#262627;width:100%;height:100%;max-width:100%;transform:translateX(100%);opacity:0;transition:transform .5s ease-in-out,opacity .55s ease}.docs_container input:checked~.docs_nav[data-v-abe39318]{transform:translateY(0);opacity:1}.docs_container input:checked~div span[data-v-abe39318]{opacity:1;transform:translate(4px,-15px) rotate(45deg);background:#fff}.docs_container input:checked~div span[data-v-abe39318]:nth-last-child(3){opacity:0;transform:rotate(0) scale(.2,.2)}.docs_container input:checked~div span[data-v-abe39318]:nth-last-child(2){transform:translate(1px,11px) rotate(-45deg)}.docs_container input[data-v-abe39318]{display:block;width:33px;height:27px;position:absolute;top:20px;right:20px;cursor:pointer;opacity:0;z-index:2;-webkit-touch-callout:none}.docs_container .burger_container[data-v-abe39318]{position:absolute;right:20px;top:20px}.docs_container .burger_container span[data-v-abe39318]{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#212121;border-radius:3px;z-index:1;transform-origin:4px 0;transition:transform .5s cubic-bezier(.77,.2,.05,1),background .5s cubic-bezier(.77,.2,.05,1),opacity .55s ease}}.docs_article h1{font-family:Montserrat;font-style:normal;font-weight:600;font-size:2.5rem;line-height:1.4}.docs_article h2{font-family:Montserrat;font-style:normal;font-weight:600;font-size:1.75rem;line-height:1.14}.docs_article p{font-family:Montserrat;font-style:normal;font-weight:500;font-size:1.25rem;line-height:1.6;color:#000}.docs_article a{color:#000}.docs_article p img{max-width:100%;border-radius:12px}.docs_article pre{overflow:auto}@media (max-width:800px){.docs_article p{font-size:1rem;line-height:1.5}.docs_article h1{font-size:2rem;line-height:1.5}.docs_article h2{font-size:1.5rem;line-height:1.33}}.tree_node_childs{padding-left:1.5rem}.tree_node{cursor:pointer;text-align:left}.tree_node .isActive{border-bottom:2px solid #fff}.level1{margin-top:1.25rem}.level1>a,.level1>span{font-family:Montserrat;font-style:normal;font-weight:600;font-size:1.25rem;line-height:1.6}.level2{margin-top:.75rem}.level2>a,.level2>span{font-family:Montserrat;font-style:normal;font-weight:500;font-size:1rem;line-height:2;margin-top:.75rem}.tree_node a{color:#fff;text-decoration:none}.icon{margin-left:1rem}</style><link rel="preload" href="/eMondrian/_nuxt/static/1670790661/docs/developer_guide/state.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/static/1670790661/docs/developer_guide/payload.js" as="script"><link rel="preload" href="/eMondrian/_nuxt/static/1670790661/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-fetch-key="data-v-abe39318:0" class="docs_container" data-v-abe39318><input type="checkbox" data-v-abe39318> <div class="burger_container" data-v-abe39318><span data-v-abe39318></span> <span data-v-abe39318></span> <span data-v-abe39318></span></div> <a href="/eMondrian/" class="logo nuxt-link-active" data-v-abe39318><img src="/eMondrian/_nuxt/img/logo.3b2a580.svg" class="black" data-v-abe39318> <img src="/eMondrian/_nuxt/img/logo_white.5bafb14.svg" class="white" data-v-abe39318></a> <nav class="docs_nav" data-v-abe39318><div class="tree_node level1" data-v-abe39318><a>
      Introduction
    </a></div><div class="tree_node level1" data-v-abe39318><a>
      Original mondrian documentation
    </a></div><div class="tree_node level1" data-v-abe39318><a>
      XMLA service address
    </a></div><div class="tree_node level1" data-v-abe39318><span>
      Client Tools
      <span class="icon" style="display:none"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iOSIgdmlld0JveD0iMCAwIDE2IDkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNS43MDcxIDAuMjkyODkzQzE1LjMxNjYgLTAuMDk3NjMxMSAxNC42ODM0IC0wLjA5NzYzMTEgMTQuMjkyOSAwLjI5Mjg5M0w4IDYuNTg1NzlMMS43MDcxMSAwLjI5Mjg5M0MxLjMxNjU4IC0wLjA5NzYzMTEgMC42ODM0MTcgLTAuMDk3NjMxMSAwLjI5Mjg5MyAwLjI5Mjg5M0MtMC4wOTc2MzE1IDAuNjgzNDE3IC0wLjA5NzYzMTUgMS4zMTY1OCAwLjI5Mjg5MyAxLjcwNzExTDcuMjkyODkgOC43MDcxMUM3LjY4MzQyIDkuMDk3NjMgOC4zMTY1OCA5LjA5NzYzIDguNzA3MTEgOC43MDcxMUwxNS43MDcxIDEuNzA3MTFDMTYuMDk3NiAxLjMxNjU4IDE2LjA5NzYgMC42ODM0MTcgMTUuNzA3MSAwLjI5Mjg5M1oiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo="></span> <span class="icon"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOSIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDkgMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wLjI5Mjg5MyAwLjI5Mjg5M0MtMC4wOTc2MzExIDAuNjgzNDE4IC0wLjA5NzYzMTEgMS4zMTY1OCAwLjI5Mjg5MyAxLjcwNzExTDYuNTg1NzkgOEwwLjI5Mjg5NCAxNC4yOTI5Qy0wLjA5NzYzMDUgMTQuNjgzNCAtMC4wOTc2MzA1IDE1LjMxNjYgMC4yOTI4OTQgMTUuNzA3MUMwLjY4MzQxOCAxNi4wOTc2IDEuMzE2NTggMTYuMDk3NiAxLjcwNzExIDE1LjcwNzFMOC43MDcxMSA4LjcwNzExQzkuMDk3NjMgOC4zMTY1OCA5LjA5NzYzIDcuNjgzNDIgOC43MDcxMSA3LjI5Mjg5TDEuNzA3MTEgMC4yOTI4OTNDMS4zMTY1OCAtMC4wOTc2MzExIDAuNjgzNDE3IC0wLjA5NzYzMTEgMC4yOTI4OTMgMC4yOTI4OTNaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"></span></span> <div class="tree_node_childs" style="display:none"><div class="tree_node level2"><a>
      How to connect from Excel
    </a></div><div class="tree_node level2"><a>
      How to connect from Tableau Desktop
    </a></div></div></div><div class="tree_node level1" data-v-abe39318><a>
      Install eMondrian Demo as Docker Container on Ubuntu
    </a></div><div class="tree_node level1" data-v-abe39318><a>
      Install eMondrian server on Windows
    </a></div><div class="tree_node level1" data-v-abe39318><a>
      How To Open 8080 Port In Windows 10
    </a></div><div class="tree_node level1 isOpened" data-v-abe39318><a class="isActive">
      eMondrian Developer Guide
    </a></div></nav> <div class="docs_article" data-v-abe39318><h1>eMondrian Developer Guide</h1>
<p>Modified <em>11 December 2022</em></p>
<h2>Purpose</h2>
<p>This guide covers main tasks that developers do to change, deploy  and mountain eMondrian engine. These tasks are:</p>
<ul>
<li>Building eMondrian from the source code;</li>
<li>Deploying eMondrian on application server;</li>
<li>Tuning eMondrian to existing server environment;</li>
<li>Maintaining database schema.</li>
</ul>
<h2>Building</h2>
<p>This instruction was tested on:</p>
<ul>
<li>Ubuntu 20.04</li>
<li>Amazon Linux 2</li>
</ul>
<h3>Requirements</h3>
<ul>
<li>JDK 11</li>
<li>Maven 3.3 or higher</li>
</ul>
<h4>How to get Linux version</h4>
<pre><code class="language-plaintext">cat /etc/os-release
</code></pre>
<h3>JDK</h3>
<h4>Ubuntu 20.04.4 LTS</h4>
<pre><code class="language-plaintext">sudo apt-get update
</code></pre>
<p>To check the current version of java use the following command.</p>
<pre><code class="language-plaintext">java -version
</code></pre>
<p>Install JDK version 11.</p>
<pre><code class="language-plaintext">sudo apt-get install openjdk-11-jdk
</code></pre>
<h4>Amazon Linux 2</h4>
<pre><code class="language-plaintext">sudo yum update
</code></pre>
<p>To check the current version of java use the following command.</p>
<pre><code class="language-plaintext">java -version
</code></pre>
<p>To get which java version has javac</p>
<pre><code class="language-plaintext">yum provides '*/javac'

sudo yum install java-11-amazon-corretto-headless
</code></pre>
<h3>Maven</h3>
<h4>Ubuntu 20.04.4 LTS</h4>
<p>To set up Maven run the following command.</p>
<pre><code class="language-plaintext">sudo apt install maven
</code></pre>
<h4>Amazon Linux 2</h4>
<pre><code class="language-plaintext">cd /tmp

sudo wget https://www-eu.apache.org/dist/maven/maven-3/3.8.5/binaries/apache-maven-3.8.5-bin.tar.gz

sudo tar xf /tmp/apache-maven-*.tar.gz -C /opt

sudo ln -s /opt/apache-maven-3.8.5 /opt/maven

sudo nano /etc/profile.d/maven.sh
</code></pre>
<p>insert following text</p>
<pre><code class="language-plaintext">export JAVA_HOME=/usr/lib/jvm/jre-11-openjdk
export M2_HOME=/opt/maven
export MAVEN_HOME=/opt/maven
export PATH=${M2_HOME}/bin:${PATH}
</code></pre>
<p><strong>Ctrl-S Ctrl-X</strong></p>
<pre><code class="language-plaintext">sudo chmod +x /etc/profile.d/maven.sh

source /etc/profile.d/maven.sh

mvn -version
</code></pre>
<h3>Git</h3>
<p>To set up Git run the following command.</p>
<h4>Ubuntu 20.04.4 LTS</h4>
<pre><code class="language-plaintext">sudo apt install git
</code></pre>
<h4>Amazon Linux 2</h4>
<pre><code class="language-plaintext">sudo yum install git
</code></pre>
<h3>Getting Mondrian Source</h3>
<p>Current Mondrian source code for eMondrian is contained in the <em>eMondrian</em> branch  of <em>SergeiSemenkov/mondrian</em> fork (<a href="https://github.com/SergeiSemenkov/mondrian">https://github.com/SergeiSemenkov/mondrian</a>).</p>
<p>Create a folder for Mondrian.</p>
<pre><code class="language-plaintext">mkdir ~/repo

cd  ~/repo
</code></pre>
<p>If you need, remove the previous version.</p>
<pre><code class="language-plaintext">rm -rf ~/repo/mondrian
</code></pre>
<p>Clone eMondrian branch.</p>
<pre><code class="language-plaintext">git clone -b eMondrian https://github.com/SergeiSemenkov/mondrian.git
</code></pre>
<h3>Building Mondrian</h3>
<p>To build Mondrian run commands.</p>
<pre><code class="language-plaintext">cd ~/repo/mondrian

mvn install
</code></pre>
<p>The build result will be placed in maven local repository</p>
<h3>Getting eMondrian Source</h3>
<p>If you need, remove the previous version.</p>
<pre><code class="language-plaintext">rm -rf ~/repo/eMondrian
</code></pre>
<p>Clone eMondrian branch.</p>
<pre><code class="language-plaintext">cd  ~/repo

git clone https://github.com/SergeiSemenkov/eMondrian.git
</code></pre>
<h3>Building eMondrian</h3>
<p>To build eMondrian run commands.</p>
<pre><code class="language-plaintext">cd ~/repo/eMondrian

mvn package
</code></pre>
<p>The build result <em>emondrian.war</em> will be in folder <em>~/repo/eMondrian/target</em></p>
<h2>Deploying</h2>
<p>Copy eMondrian.war file to the webapps directory of your java server (Apache Tomcat, Jetty, Tiny Java Web Server).</p>
<h3>Docker</h3>
<p>In order to configure eMondrian instance we have to change three files in eMondrian web application:</p>
<h4>/WEB-INF/datasources.xml</h4>
<p>Contains data source description and path to schema file.</p>
<h4>/WEB-INF/schema/schema.xml</h4>
<p>Schema file.</p>
<h4>/WEB-INF/classes/mondrian.properties</h4>
<p>Server configuration properties.<br>
To prepare a docker file we must unpack the source web archive and rewrite three files described above.</p>
<h2>Tuning</h2>
<h3>Configuration</h3>
<p>To tune the server for your needs you can change <a href="https://sergeisemenkov.github.io/eMondrian/original_docs/configuration.html">mondrian server properties</a> that are contained in <em>/WEB-INF/classes/mondrian.properties</em>.<br>
Descriptions of properties are in the file and also it’s online.</p>
<p>Below are some properties which are important for configurations that have to work with Excel.</p>
<h4>mondrian.olap.SsasCompatibleNaming</h4>
<p>Set this property to true. If true, hierarchies are named [Dimension].[Hierarchy]; if false, [Dimension.Hierarchy].</p>
<h4>mondrian.server.IdleOrphanSessionTimeout</h4>
<p>This property sets the time which session lives while it is idle.The server will close a session if it is not in use for the specified timeout. Default value is 3600 seconds.</p>
<h4>mondrian.server.EnableSessionCaching</h4>
<p>Set this property to true if you want to create a cache for every session.</p>
<h3>Datasources</h3>
<p>By default datasource settings are in file <em>/WEB-INF/datasources.xml</em>.</p>
<p>It contains data source connection string and reference to file where mondrian schema resides.</p>
<p>By default folder for schema files is <em>/WEB-INF/schema/</em></p>
<h4>ClickHouse</h4>
<p>Here are some details about ClickHouse data source info.</p>
<pre><code class="language-plaintext">&lt;DataSourceInfo>Provider=mondrian;jdbc:clickhouse://&lt;host>:&lt;port>[/&lt;database>][&ssl=true][user=&lt;my_user>][&password=&lt;my_password>];JdbcDrivers=ru.yandex.clickhouse.ClickHouseDriver&lt;/DataSourceInfo>
</code></pre>
<ul>
<li>host - ClickHouse host</li>
<li>port - ClickHouse port</li>
<li>my_user - ClickHouse user name</li>
<li>my_password - user password</li>
<li>Set ssl=true if using https</li>
</ul>
<h3>Schema</h3>
<p>A schema defines a multi-dimensional database. It contains a logical model, consisting of cubes, hierarchies, and members, and a mapping of this model onto a physical model.</p>
<p><a href="https://sergeisemenkov.github.io/eMondrian/original_docs/schema.html">This link</a> contains a description of schema elements.</p>
<p>Many calculated items are defined in MDX language. Quick introduction of MDX is <a href="https://sergeisemenkov.github.io/eMondrian/original_docs/mdx.html">here</a>.</p>
<p>A schema is a xml file. It can be modified in text editor or with a special Schema Editor.</p>
</div></div></div></div><script defer src="/eMondrian/_nuxt/static/1670790661/docs/developer_guide/state.js"></script><script src="/eMondrian/_nuxt/70dfbcb.js" defer></script><script src="/eMondrian/_nuxt/fef1cbb.js" defer></script><script src="/eMondrian/_nuxt/aa02bf4.js" defer></script><script src="/eMondrian/_nuxt/5378a89.js" defer></script><script src="/eMondrian/_nuxt/80dda03.js" defer></script><script src="/eMondrian/_nuxt/605d662.js" defer></script><script src="/eMondrian/_nuxt/565d7d2.js" defer></script>
  </body>
</html>
